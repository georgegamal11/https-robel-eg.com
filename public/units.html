<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <!-- ZERO CACHE CONFIGURATION -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Porto Golf Marina - Premium Coastal Lifestyle | Robel Real Estate</title>

    <!-- Speed & Connection Hints -->
    <link rel="preconnect" href="https://robel-api.george-gamal139.workers.dev">
    <link rel="dns-prefetch" href="https://robel-api.george-gamal139.workers.dev">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">

    <meta name="description"
        content="Discover luxury units in Porto Golf Marina with Robel. Premier real estate opportunities in the heart of El Alamein.">

    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Tajawal:wght@400;500;700&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#c9a23f', // Gold
                        'primary-dark': '#b08d2b',
                        secondary: '#64748b',
                        'navy-deep': '#0f172a',
                        'bg-soft': '#f8fafd',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        arabic: ['Tajawal', 'sans-serif'],
                    },
                    animation: {
                        'fade-up': 'fadeUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards',
                        'scale-in': 'scaleIn 0.5s ease-out forwards',
                    },
                    keyframes: {
                        fadeUp: {
                            '0%': { opacity: 0, transform: 'translateY(20px)' },
                            '100%': { opacity: 1, transform: 'translateY(0)' },
                        },
                        scaleIn: {
                            '0%': { opacity: 0, transform: 'scale(0.95)' },
                            '100%': { opacity: 1, transform: 'scale(1)' },
                        }
                    }
                }
            }
        }
    </script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles/units.css?v=20260224033801">
</head>

<body class="bg-white text-gray-900 font-sans antialiased">
    <!-- Language Toggle (Moved to Header) -->

    <!-- Loading Screen (Professional Logo Loader) -->
    <div id="loader"
        class="fixed inset-0 bg-white z-[100] flex flex-col items-center justify-center transition-opacity duration-500">
        <div class="relative flex items-center justify-center mb-6">
            <!-- Outer Glow -->
            <div class="absolute w-32 h-32 bg-primary/10 rounded-full blur-2xl animate-pulse"></div>
            <!-- Logo -->
            <img loading="lazy" src="assets/images/ui/logo-gold.png"
                class="w-20 h-20 object-contain relative z-10 animate-scale-in" alt="Robel Logo">
        </div>
        <div class="text-[10px] font-bold tracking-[0.4em] text-primary uppercase animate-pulse"
            data-i18n="details_loading">Loading</div>
    </div>

    <!-- Header Section -->
    <header class="main-header sticky top-0 z-[100] bg-white border-b border-gray-100 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="h-auto py-4 flex flex-col gap-4">
                <!-- Top Row: Logo & Back -->
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <button id="back-btn" onclick="history.back()"
                            class="p-2 -ml-2 hover:bg-gray-50 rounded-full transition-colors text-gray-500 hover:text-primary">
                            <i data-lucide="arrow-left" class="w-6 h-6"></i>
                        </button>

                        <!-- Standard Header Content -->
                        <div id="standard-header-content" class="flex items-center gap-4">
                            <a href="index.html" class="flex items-center">
                                <img loading="lazy" src="assets/images/ui/logo-gold.png"
                                    class="h-10 sm:h-12 w-auto object-contain" alt="Robel Logo">
                            </a>
                            <div class="h-10 w-px bg-gray-100 mx-1 hidden sm:block"></div>
                            <div>
                                <h1 class="text-xl sm:text-2xl font-bold text-gray-900 tracking-tight" id="page-title"
                                    data-i18n="search_units">Search Units
                                </h1>
                                <p class="text-sm text-gray-500 mt-0.5" id="header-subtitle"
                                    data-i18n="units_filter_subtitle">
                                    Select a project to begin filtering</p>
                            </div>
                        </div>

                        <!-- Building Mode Header Content -->
                        <div id="building-header-content" class="hidden flex items-center gap-4">
                            <a href="index.html" class="flex items-center">
                                <img loading="lazy" src="assets/images/ui/logo-gold.png"
                                    class="h-10 sm:h-12 w-auto object-contain" alt="Robel Logo">
                            </a>
                            <div>
                                <div class=" flex items-center gap-2">
                                    <h1 id="building-title" class="text-2xl font-bold text-gray-900 tracking-tight">B133
                                    </h1>
                                    <span id="building-project-badge"
                                        class="px-2 py-0.5 rounded-full bg-blue-50 text-blue-600 text-xs font-bold">Porto
                                        Golf Marina</span>
                                </div>
                                <p class="text-sm text-gray-500" data-i18n="filter_perfect_unit">Select filters to find
                                    your perfect unit</p>
                            </div>
                        </div>

                    </div>

                    <!-- Right: Unit Count & Lang -->
                    <div class="flex items-center gap-2 sm:gap-4">
                        <!-- Lang Toggle -->
                        <button id="lang-btn"
                            class="w-9 h-9 sm:w-11 sm:h-11 rounded-full bg-gray-50 border border-gray-200 flex items-center justify-center font-bold text-xs text-primary hover:bg-primary hover:text-white transition-all">
                            AR
                        </button>

                        <div class="flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-lg border border-gray-200">
                            <i data-lucide="home" class="w-3.5 h-3.5 text-gray-400"></i>
                            <span id="resultsCount" class="text-xs sm:text-sm font-bold text-gray-900">--</span>
                        </div>
                    </div>
                </div>

                <!-- PROJECT SELECTION (Scope) - Standard Mode -->
                <div id="project-selection" class="flex flex-wrap gap-3 py-2 border-t border-gray-50">
                    <button
                        class="project-card px-4 py-2 rounded-lg border border-gray-200 text-sm font-medium hover:border-primary hover:text-primary transition-all"
                        data-project="porto-golf-marina">
                        Porto Golf Marina
                    </button>
                    <button
                        class="project-card px-4 py-2 rounded-lg border border-gray-200 text-sm font-medium hover:border-primary hover:text-primary transition-all"
                        data-project="porto-said">
                        Porto Said
                    </button>
                    <button
                        class="project-card px-4 py-2 rounded-lg border border-gray-200 text-sm font-medium hover:border-primary hover:text-primary transition-all"
                        data-project="celebration">
                        Celebration
                    </button>
                </div>

                <!-- FILTERS PANEL (Standard) -->
                <div id="filtersPanel"
                    class="hidden grid grid-cols-3 md:grid-cols-5 gap-2 pt-2 border-t border-gray-50">
                    <!-- Standard Filters... -->
                    <div class="col-span-1">
                        <label class="block text-[8px] sm:text-[10px] font-bold text-gray-400 uppercase mb-1"
                            data-i18n="filter_building">Building</label>
                        <select id="buildingFilter"
                            class="w-full bg-gray-50 border border-gray-200 text-[10px] sm:text-xs rounded-lg p-1.5 focus:ring-primary focus:border-primary">
                            <option value="">All</option>
                        </select>
                    </div>
                    <div class="col-span-1">
                        <label class="block text-[8px] sm:text-[10px] font-bold text-gray-400 uppercase mb-1"
                            data-i18n="filter_area">Area</label>
                        <select id="areaFilter"
                            class="w-full bg-gray-50 border border-gray-200 text-[10px] sm:text-xs rounded-lg p-1.5 focus:ring-primary focus:border-primary">
                            <option value="">All</option>
                        </select>
                    </div>
                    <div class="col-span-1">
                        <label class="block text-[8px] sm:text-[10px] font-bold text-gray-400 uppercase mb-1"
                            data-i18n="filter_status">Status</label>
                        <select id="statusFilter"
                            class="w-full bg-gray-50 border border-gray-200 text-[10px] sm:text-xs rounded-lg p-1.5 focus:ring-primary focus:border-primary">
                            <option value="Available" selected data-i18n="status_available">Available</option>
                            <option value="Reserved" data-i18n="status_reserved">Reserved</option>
                            <option value="Sold" data-i18n="status_sold">Sold</option>
                            <option value="" data-i18n="status_all">All</option>
                        </select>
                    </div>
                    <div class="col-span-2 md:col-span-1">
                        <label class="block text-[8px] sm:text-[10px] font-semibold text-gray-500 uppercase mb-1"
                            data-i18n="filter_delivery">Delivery</label>
                        <div class="flex bg-gray-50 p-0.5 rounded-lg border border-gray-200">
                            <button
                                class="delivery-btn flex-1 py-1 text-[9px] sm:text-xs font-medium rounded text-gray-600 hover:bg-white hover:text-primary hover:shadow-sm transition-all active"
                                data-delivery="All" data-i18n="status_all">All</button>
                            <button
                                class="delivery-btn flex-1 py-1 text-[9px] sm:text-xs font-medium rounded text-gray-600 hover:bg-white hover:text-primary hover:shadow-sm transition-all"
                                data-delivery="Ready" data-i18n="status_ready">Ready</button>
                            <button
                                class="delivery-btn flex-1 py-1 text-[9px] sm:text-xs font-medium rounded text-gray-600 hover:bg-white hover:text-primary hover:shadow-sm transition-all"
                                data-delivery="U-Const" data-i18n="status_u">U-Const</button>
                        </div>
                    </div>
                    <div class="col-span-1 relative">
                        <label class="block text-[8px] sm:text-[10px] font-bold text-gray-400 uppercase mb-1"
                            data-i18n="search_label">Search</label>
                        <div class="relative">
                            <input type="text" id="searchInput"
                                class="w-full bg-gray-50 border border-gray-200 text-[10px] sm:text-xs rounded-lg p-1.5 pl-6 focus:ring-primary focus:border-primary"
                                placeholder="Code...">
                            <i data-lucide="search" class="w-3 h-3 text-gray-400 absolute left-2 top-2"></i>
                        </div>
                    </div>
                </div>

                <!-- NEW: BUILDING SPECIFIC FILTERS (Hidden by default) -->
                <div id="buildingFiltersPanel"
                    class="hidden grid grid-cols-3 md:grid-cols-6 gap-2 pt-2 border-t border-gray-50">

                    <!-- Floor -->
                    <!-- Floor -->
                    <div class="col-span-1">
                        <label class="block text-[8px] sm:text-[10px] font-bold text-gray-400 uppercase mb-1"
                            data-i18n="filter_floor">Floor</label>
                        <select id="b-floorFilter"
                            class="w-full bg-gray-50 border border-gray-200 text-[10px] sm:text-xs rounded-lg p-1.5 focus:ring-primary focus:border-primary">
                            <option value="">All</option>
                        </select>
                    </div>

                    <!-- View -->
                    <div class="col-span-1">
                        <label class="block text-[8px] sm:text-[10px] font-bold text-gray-400 uppercase mb-1"
                            data-i18n="filter_view">View</label>
                        <select id="b-viewFilter"
                            class="w-full bg-gray-50 border border-gray-200 text-[10px] sm:text-xs rounded-lg p-1.5 focus:ring-primary focus:border-primary">
                            <option value="">All</option>
                        </select>
                    </div>

                    <!-- Area -->
                    <div class="col-span-1">
                        <label class="block text-[8px] sm:text-[10px] font-bold text-gray-400 uppercase mb-1"
                            data-i18n="filter_area">Area</label>
                        <select id="b-areaFilter"
                            class="w-full bg-gray-50 border border-gray-200 text-[10px] sm:text-xs rounded-lg p-1.5 focus:ring-primary focus:border-primary">
                            <option value="">All</option>
                        </select>
                    </div>

                    <!-- Status -->
                    <div class="col-span-1">
                        <label class="block text-[8px] sm:text-[10px] font-bold text-gray-400 uppercase mb-1"
                            data-i18n="filter_status">Status</label>
                        <select id="b-statusFilter"
                            class="w-full bg-gray-50 border border-gray-200 text-[10px] sm:text-xs rounded-lg p-1.5 focus:ring-primary focus:border-primary">
                            <option value="" data-i18n="status_all">All</option>
                            <option value="Available" selected data-i18n="status_available">Available</option>
                        </select>
                    </div>

                    <!-- Price -->
                    <div class="col-span-1">
                        <label class="block text-[8px] sm:text-[10px] font-bold text-gray-400 uppercase mb-1"
                            data-i18n="filter_price">Price</label>
                        <select id="b-priceFilter"
                            class="w-full bg-gray-50 border border-gray-200 text-[10px] sm:text-xs rounded-lg p-1.5 focus:ring-primary focus:border-primary">
                            <option value="">All</option>
                            <option value="asc">Low</option>
                            <option value="desc">High</option>
                        </select>
                    </div>

                    <!-- Purpose -->
                    <div class="col-span-1">
                        <label class="block text-[8px] sm:text-[10px] font-bold text-gray-400 uppercase mb-1"
                            data-i18n="filter_purpose">Purpose</label>
                        <select id="b-purposeFilter"
                            class="w-full bg-gray-50 border border-gray-200 text-[10px] sm:text-xs rounded-lg p-1.5 focus:ring-primary focus:border-primary">
                            <option value="">All</option>
                        </select>
                    </div>
                </div>

            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- Results Section Container -->
        <div id="resultsSection" class="opacity-0 transition-opacity duration-300">
            <!-- Filter Tags (Active) -->
            <div id="active-filters" class="flex flex-wrap gap-2 mb-6 empty:hidden">
                <!-- Badges injected here -->
            </div>

            <!-- Units Grid -->
            <div id="buildingsGrid" class="grid grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-6">
                <!-- Cards injected here -->
            </div>
        </div>

        <!-- Empty State -->
        <div id="noResults" class="hidden py-20 text-center">
            <div class="mx-auto w-24 h-24 bg-gray-50 rounded-full flex items-center justify-center mb-4">
                <i data-lucide="search" class="w-10 h-10 text-gray-300"></i>
            </div>
            <h3 class="text-lg font-medium text-gray-900" data-i18n="units_no_found">No units found</h3>
            <p class="text-gray-500 mt-2" data-i18n="units_adjust_filters">Try adjusting your filters or search criteria
            </p>
        </div>
    </main>

    <!-- Comparison Bottom Bar -->
    <div id="compare-bar"
        class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-[0_-10px_30px_rgba(0,0,0,0.05)] p-4 sm:p-6 transition-all transform translate-y-full opacity-0 z-50">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center gap-4">
                <div class="flex -space-x-2" id="compare-avatars">
                    <!-- Unit thumbnails -->
                </div>
                <div>
                    <div class="flex items-center gap-1.5">
                        <span id="compare-count" class="font-black text-gray-900 text-sm sm:text-base">0</span>
                        <span class="text-xs sm:text-sm font-bold text-gray-400 uppercase tracking-wider"
                            data-i18n="units_compare_selected">selected</span>
                    </div>
                </div>
            </div>
            <div class="flex items-center gap-3">
                <button id="clear-compare-btn" onclick="compareState.selectedIds=[]; updateCompareBar();"
                    class="px-4 py-2 text-xs font-bold text-gray-400 hover:text-red-500 transition-colors uppercase tracking-widest hidden sm:block">
                    Clear
                </button>
                <button id="show-compare-btn" onclick="window.openCompareModal()"
                    style="background-color: #c9a23f !important;"
                    class="px-6 py-3 text-white font-black rounded-xl shadow-lg shadow-primary/20 hover:scale-105 active:scale-95 transition-all flex items-center gap-2">
                    <span class="text-xs sm:text-sm uppercase tracking-widest" data-i18n="units_compare_now">Compare
                        Now</span>
                    <i data-lucide="arrow-right" class="w-4 h-4"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Comparison Modal -->
    <div id="compare-modal" class="fixed inset-0 z-[60] hidden" aria-labelledby="modal-title" role="dialog"
        aria-modal="true">
        <div class="absolute inset-0 bg-gray-900/60 backdrop-blur-md transition-opacity" id="compare-backdrop"
            onclick="window.closeCompareModal()"></div>

        <!-- Updated Mobile Layout: Top-aligned and full width on small screens -->
        <div class="absolute top-0 left-0 right-0 sm:inset-auto sm:top-1/2 sm:left-1/2 sm:-translate-x-1/2 sm:-translate-y-1/2 w-full sm:max-w-6xl max-h-[90vh] bg-white sm:rounded-2xl shadow-2xl flex flex-col transform transition-all -translate-y-full sm:translate-y-0 opacity-0"
            id="compare-panel">

            <!-- Modal Header -->
            <div
                class="px-6 py-5 border-b border-gray-100 flex items-center justify-between sticky top-0 bg-white z-20 sm:rounded-t-2xl">
                <div>
                    <h2 class="text-xl font-black text-gray-900" data-i18n="units_compare_title">Unit Comparison</h2>
                    <p class="text-[10px] sm:text-xs text-gray-500 mt-1 uppercase tracking-widest font-bold">
                        <span data-i18n="units_compare_selected">Comparing</span>
                        <span id="modal-compare-count" class="text-primary font-black mx-1">0</span>
                        <span data-i18n="nav_menu_project">units</span>
                    </p>
                </div>
                <button id="close-compare-modal" onclick="window.closeCompareModal()"
                    class="p-2 hover:bg-gray-100 rounded-full transition-colors text-gray-400 hover:text-red-500">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>

            <!-- Modal Body (Scrollable) -->
            <div class="flex-1 overflow-auto p-6 bg-gray-50/50" id="compare-content">
                <!-- Comparison Table Built Dynamically -->
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast"
        class="fixed bottom-24 left-1/2 -translate-x-1/2 bg-gray-900 text-white px-4 py-2 rounded-lg shadow-lg text-sm font-medium opacity-0 transition-opacity pointer-events-none z-[70]">
        Notification message
    </div>


    <!-- Config & Scripts (Bundled) -->
    <script src="scripts/core-bundle.js?v=20260224033801" defer></script>
    <script src="api/admin-api.js?v=20260224033801" defer></script>
    <script src="utils/image-loader-utils.js?v=20260224033801" defer></script>
    <script src="pages/units.js?v=20260224033801" defer></script>
    <script>
        // Initialize Lucide Icons after DOM load
        window.addEventListener('load', () => {
            if (typeof lucide !== 'undefined') lucide.createIcons();
        });
    </script>
</body>

</html>

